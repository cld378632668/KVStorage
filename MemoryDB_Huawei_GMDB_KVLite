正式入职前几个月由于当时的战略安排我接触了一下GMDB，涉密部分不方便讲解，这里讲些华为对外的产品文档中的本来就公开的部分。因为在学校期间发表了一篇论文，是设计了一种前缀树索引应用在了KV数据库上，具体安排的工作内容是让我剖析已有的索引模块，看看能不能把前缀树索引加上去，来提升GMDB的能力。


我的优化设计如下：
业务组播场景中需要用排序集合访问，其应用场景如下：
1、支持建立hash+树索引（部分字段上建hash，部分字段上建树）
2、支持根据hash索引字段查找到某个树上所有记录，记录按排序字段有序
3、支持根据hash索引字段+排序索引的部分字段查找满足条件的一批记录，且按排序
字段有序
4、支持按照上述条件删除。



内存数据库主要解决两个问题：
a)微秒级实时OLTP；
b)具备事务处理能力和高可用的高性能数据库前端cache；

主要的厂家有Oracle Timesten、IBM SolidDB、Huawei GMDB。

内存数据库在架构上与磁盘数据库有较大差别，它的架构特点是：
支持嵌入式部署和C/S部署方式；
不具备日志、缓存管理等模块；
工作数据都存放在内存中；
数据使用T-Tree索引组织；
磁盘存储作为数据备份方式；
 
内存OLTP数据库可作为磁盘数据库的前端缓存部署。

____________________________

架构:

FaStore系统中包括以下子系统：

1、公共模块

负责提供公共的能力，包括Latch管理、操作系统适配层、统一的错误、日志、告警、统一配置、共享内存管理、线程管理等。

本次需要对ERR/LOG/Alarm和Configuration模块进行适配开发，对接业务日志、告警处理和配置模块。

 

2、Storage引擎

负责提供事务ACID能力。

负责提供索引能力，包括T树、B+树和Hash。

负责提供内存管理，包括表空间、段、区、块的分级管理。

负责提供并发管理。

负责基础数据类型的提供，排序规则（主要是字符串的多语言场景），特殊数据类型如lob字段。

负责系统表以及高速数据字典缓存管理。

 

3、SQL引擎

负责提供PL能力。

负责提供SQL能力，包括DDL、DML。

能够支持表达式和内置函数的解析和执行。

DML的软解析能力，能够缓存SQL解析、验证、优化结果并在Session间共享使用，避免硬解析的性能开销。

负责行存储类型为Key-Value模式时的子树查询和二级索引功能。

 

4、Tree Engine负责提供对象操作能力。

负责提供解析和执行能力。

负责提供Schema管理能力。

负责提供通过key值直接获取和修改数据库的能力。

 

5、K-V接口

负责提供行接口和K-V之间转换的能力。

 

6、JDK

负责提供应用使用的开发包，主要是CLI以及JDBC。

 

7、Tool

各种操作或维护方面的工具。

FaStore系统中包括以下子系统：

1、公共模块

负责提供公共的能力，包括Latch管理、操作系统适配层、统一的错误、日志、告警、统一配置、共享内存管理、线程管理等。

本次需要对ERR/LOG/Alarm和Configuration模块进行适配开发，对接业务日志、告警处理和配置模块。

 

2、Storage引擎

负责提供事务ACID能力。

负责提供索引能力，包括T树、B+树和Hash。

负责提供内存管理，包括表空间、段、区、块的分级管理。

负责提供并发管理。

负责基础数据类型的提供，排序规则（主要是字符串的多语言场景），特殊数据类型如lob字段。

负责系统表以及高速数据字典缓存管理。

 

3、SQL引擎

负责提供PL能力。

负责提供SQL能力，包括DDL、DML。

能够支持表达式和内置函数的解析和执行。

DML的软解析能力，能够缓存SQL解析、验证、优化结果并在Session间共享使用，避免硬解析的性能开销。

负责行存储类型为Key-Value模式时的子树查询和二级索引功能。

 

4、Tree Engine负责提供对象操作能力。

负责提供解析和执行能力。

负责提供Schema管理能力。

负责提供通过key值直接获取和修改数据库的能力。

 

5、K-V接口

负责提供行接口和K-V之间转换的能力。

 

6、JDK

负责提供应用使用的开发包，主要是CLI以及JDBC。

 

7、Tool

各种操作或维护方面的工具。
